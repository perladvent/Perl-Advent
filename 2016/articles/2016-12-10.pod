Title: Combining wishlists for production and shipping planning
Topic: CSV
Author: H.Merijn Brand <hmbrand@cpan.org>

=pod

=for comment
Okay, I give up.  I couldn't fix the UTF-8 handling for this.  So I rendered
the output as HTML and then cut and paste it here, then manually fixed it.
Someone needs to look at the source code, but since I don't have access to
the deployment server right now, that's not going to be me.
Mark, 2016-12-09

=for html
<div class='pod'><h3 id="New-logistics">New logistics</h3>
<p>With slavery being questioned all around the world, quite a few elves rioted and turned their back on Santa. He is now facing a downsized force of helpers and has to work even more efficient than ever before.</p>
<p>Especially the logistics department was cut down to a number that made production of toys a nightmare, as the production department has no idea how many toys to make and with what specifications.</p>
<p>The mail group already being reduced in size last year now works way more efficiently, as they are capable to control the annexes in the countries that collect the wish-lists. They now use CSV files. Or do they?</p>
<p>Due to locales and local regulations, all the country annexes use their local settings to produce the CSV files with the gathered wish-lists. These are then sent to the North Pole where the mail department collects, sorts and distributes them to the logistics department that will then steer the production.</p>
<p>That plan sounds fine, until they note that the Dutch use a semicolon for separation character, the Romanians use UTF-16LE encoding, the Spanish lists come with \r\n line endings and the Germans keep misspelling count as kount. They chose CSV as the definition was so easy nothing could go wrong. Well, now they have to think again.</p>
<p>How many Red Fire Trucks will production have to make so logistics can set up a scheme for Santa to not have to return to the Pole if does not have enough red trucks to fulfill the children&#39;s wishes.</p>
<h3 id="Data-received">Data received</h3>
<p>The master elf showed his programmers the format of the wish-list he got from the UK department, named <a href="wish-uk.csv"><code>wish-uk.csv</code></a>:</p>
<pre><code> Name,Date of Birth,Postal Code,Address,Wish,Specs
 Hilbert Potter,20121220,NE66 1NQ,Alnwick Castle,Wand,&quot;10&frac34;&quot;&quot; Vine w/ dragon heartstring&quot;
 Jane Granger,20111111,NE13 6LY,&quot;Random Edge, Warkworth Drive&quot;,Magic beaded handbag,Unlimited space
 Wolff Weasly,20131211,NE13 5AX,The Grove,Wand,Crooked oak w/ Muggle blood</code></pre>
 <h4 id="Basic-knowledge">Basic knowledge</h4>
 <p>The logistic elves are fond of the features perl offers them, so they start out the <a href="wish-uk-1.pl">simple way</a>:</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Text::CSV_XS</span> <span class="words">qw( csv )</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-uk.csv&quot;</span><span class="structure">);</span></code><br />&nbsp;</td></table>
 <p>and they say all went well. They showed the master elf the content using</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Data::Peek</span><span class="structure">;</span><br /><br /><span class="word">DDumper</span> <span class="structure">(</span><span class="symbol">$aoa</span><span class="structure">);</span></code><br />&nbsp;</td></table>
 <p>and it showed</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;<br />16:&nbsp;<br />17:&nbsp;<br />18:&nbsp;<br />19:&nbsp;<br />20:&nbsp;<br />21:&nbsp;<br />22:&nbsp;<br />23:&nbsp;<br />24:&nbsp;<br />25:&nbsp;<br />26:&nbsp;<br />27:&nbsp;<br />28:&nbsp;<br />29:&nbsp;<br />30:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="structure">[</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">[</span>   <span class="single">'Name'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Date of Birth'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Postal Code'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Address'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Wish'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Specs'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">]</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">[</span>   <span class="single">'Hilbert Potter'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">20121220</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'NE66 1NQ'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Alnwick Castle'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Wand'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'10&frac34;&quot; Vine w/ dragon heartstring'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">]</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">[</span>   <span class="single">'Jane Granger'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">20111111</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'NE13 6LY'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Random Edge, Warkworth Drive'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Magic beaded handbag'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Unlimited space'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">]</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">[</span>   <span class="single">'Wolff Weasly'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">20131211</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'NE13 5AX'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'The Grove'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Wand'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Crooked oak w/ Muggle blood'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">]</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">]</span></code><br />&nbsp;</td></table>
 <h4 id="Advanced-knowledge">Advanced knowledge</h4>
 <p>The master elf suggested to <a href="wish-uk-2.pl">use the headers</a>:</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;<br />16:&nbsp;<br />17:&nbsp;<br />18:&nbsp;<br />19:&nbsp;<br />20:&nbsp;<br />21:&nbsp;<br />22:&nbsp;<br />23:&nbsp;<br />24:&nbsp;<br />25:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">DDumper</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-uk.csv&quot;</span><span class="operator">,</span> <span class="word">headers</span> <span class="operator">=&gt;</span> <span class="double">&quot;auto&quot;</span><span class="structure">);</span><br /><br /><span class="structure">[</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">{</span>   <span class="word">Address</span>          <span class="operator">=&gt;</span> <span class="single">'Alnwick Castle'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Date of Birth'</span>  <span class="operator">=&gt;</span> <span class="number">20121220</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Name</span>             <span class="operator">=&gt;</span> <span class="single">'Hilbert Potter'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Postal Code'</span>    <span class="operator">=&gt;</span> <span class="single">'NE66 1NQ'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Specs</span>            <span class="operator">=&gt;</span> <span class="single">'10&frac34;&quot; Vine w/ dragon heartstring'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wish</span>             <span class="operator">=&gt;</span> <span class="single">'Wand'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">{</span>   <span class="word">Address</span>          <span class="operator">=&gt;</span> <span class="single">'Random Edge, Warkworth Drive'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Date of Birth'</span>  <span class="operator">=&gt;</span> <span class="number">20111111</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Name</span>             <span class="operator">=&gt;</span> <span class="single">'Jane Granger'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Postal Code'</span>    <span class="operator">=&gt;</span> <span class="single">'NE13 6LY'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Specs</span>            <span class="operator">=&gt;</span> <span class="single">'Unlimited space'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wish</span>             <span class="operator">=&gt;</span> <span class="single">'Magic beaded handbag'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">{</span>   <span class="word">Address</span>          <span class="operator">=&gt;</span> <span class="single">'The Grove'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Date of Birth'</span>  <span class="operator">=&gt;</span> <span class="number">20131211</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Name</span>             <span class="operator">=&gt;</span> <span class="single">'Wolff Weasly'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Postal Code'</span>    <span class="operator">=&gt;</span> <span class="single">'NE13 5AX'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Specs</span>            <span class="operator">=&gt;</span> <span class="single">'Crooked oak w/ Muggle blood'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wish</span>             <span class="operator">=&gt;</span> <span class="single">'Wand'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">]</span></code><br />&nbsp;</td></table>
 <p>and the programming elves were in awe for they did not expect the master elf to know about this magic. They then started to read the manual ...</p>
 <h4 id="Planning-the-trips">Planning the trips</h4>
 <p>The sleigh is not of unlimited size - in contrary of common belief - and cannot hold unlimited weight (due to reindeer fatigue), so Santa must plan well in advance how many presents he can take on a single trip.</p>
 <p>The aim of the logistical elves was to count presents per region, so they were not interested in the personal data. Just the postal code and the wish-list item were important (for the planning department). On their efforts they also decided that they just wanted to count on the first part of the postal code, so they amended the <a href="wish-uk-3.pl">script</a>:</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">my</span> <span class="symbol">%count</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-uk.csv&quot;</span><span class="operator">,</span> <span class="word">headers</span> <span class="operator">=&gt;</span> <span class="double">&quot;auto&quot;</span><span class="operator">,</span> <span class="word">filter</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">1</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span> <span class="structure">{</span> <span class="symbol">$count</span><span class="structure">{</span><span class="magic">$_</span><span class="structure">{</span><span class="word">Wish</span><span class="structure">}}{</span><span class="magic">$_</span><span class="structure">{</span><span class="double">&quot;Postal Code&quot;</span><span class="structure">}</span> <span class="operator">=~</span> <span class="substitute">s/\s.*//r</span><span class="structure">}</span><span class="operator">++</span><span class="structure">;</span> <span class="number">0</span><span class="structure">;</span> <span class="structure">}});</span><br /><br /><span class="word">DDumper</span> <span class="cast">\</span><span class="symbol">%count</span><span class="structure">;</span><br /><br /><span class="structure">{</span>   <span class="single">'Magic beaded handbag'</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NE13</span>             <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NE13</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NE66</span>             <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span></code><br />&nbsp;</td></table>
 <p>Happy with the result they now wanted to combine that with their own knowledge on the size and the weight of the presents, which they stored as</p>
 <pre><code>  present,weight,size
  wand,0.2,1
  handbag,1,2</code></pre>
  <p>They had a long session on how to match the wish description with the present data they had, and came up with <a href="wish-uk-4.pl">what they think was accurate enough</a>:</p>
  <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;<br />16:&nbsp;<br />17:&nbsp;<br />18:&nbsp;<br />19:&nbsp;<br />20:&nbsp;<br />21:&nbsp;<br />22:&nbsp;<br />23:&nbsp;<br />24:&nbsp;<br />25:&nbsp;<br />26:&nbsp;<br />27:&nbsp;<br />28:&nbsp;<br />29:&nbsp;<br />30:&nbsp;<br />31:&nbsp;<br />32:&nbsp;<br />33:&nbsp;<br />34:&nbsp;<br />35:&nbsp;<br />36:&nbsp;<br />37:&nbsp;<br />38:&nbsp;<br />39:&nbsp;<br />40:&nbsp;<br />41:&nbsp;<br />42:&nbsp;<br />43:&nbsp;<br />44:&nbsp;<br />45:&nbsp;<br />46:&nbsp;<br />47:&nbsp;<br />48:&nbsp;<br />49:&nbsp;<br />50:&nbsp;<br />51:&nbsp;<br />52:&nbsp;<br />53:&nbsp;<br />54:&nbsp;<br />55:&nbsp;<br />56:&nbsp;<br />57:&nbsp;<br />58:&nbsp;<br />59:&nbsp;<br />60:&nbsp;<br />61:&nbsp;<br />62:&nbsp;<br />63:&nbsp;<br />64:&nbsp;<br />65:&nbsp;<br />66:&nbsp;<br />67:&nbsp;<br />68:&nbsp;<br />69:&nbsp;<br />70:&nbsp;<br />71:&nbsp;<br />72:&nbsp;<br />73:&nbsp;<br />74:&nbsp;<br />75:&nbsp;<br />76:&nbsp;<br />77:&nbsp;<br />78:&nbsp;<br />79:&nbsp;<br />80:&nbsp;<br />81:&nbsp;<br />82:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">List::Util</span>   <span class="words">qw( sum first )</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">Text::CSV_XS</span> <span class="words">qw( csv )</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">$props</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;presents.csv&quot;</span><span class="operator">,</span> <span class="word">key</span> <span class="operator">=&gt;</span> <span class="double">&quot;present&quot;</span><span class="structure">);</span><br /><br /><span class="keyword">my</span> <span class="symbol">%count</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-uk.csv&quot;</span><span class="operator">,</span> <span class="word">headers</span> <span class="operator">=&gt;</span> <span class="double">&quot;auto&quot;</span><span class="operator">,</span> <span class="word">filter</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">1</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$count</span><span class="structure">{</span><span class="magic">$_</span><span class="structure">{</span><span class="word">Wish</span><span class="structure">}}{</span><span class="magic">$_</span><span class="structure">{</span><span class="double">&quot;Postal Code&quot;</span><span class="structure">}</span> <span class="operator">=~</span> <span class="substitute">s/\s.*//r</span><span class="structure">}</span><span class="operator">++</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">0</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">});</span><br /><br /><span class="keyword">my</span> <span class="symbol">@presents</span> <span class="operator">=</span> <span class="word">keys</span> <span class="cast">%</span><span class="symbol">$props</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">%ship</span><span class="structure">;</span><br /><br /><span class="keyword">foreach</span> <span class="keyword">my</span> <span class="symbol">$wish</span> <span class="structure">(</span><span class="word">keys</span> <span class="symbol">%count</span><span class="structure">)</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$w</span> <span class="operator">=</span> <span class="word">lc</span> <span class="symbol">$wish</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="operator">,</span> <span class="symbol">$p</span><span class="structure">);</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> <span class="structure">(</span><span class="symbol">$p</span> <span class="operator">=</span> <span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$w</span><span class="structure">})</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="structure">)</span> <span class="operator">=</span> <span class="structure">(</span><span class="symbol">$p</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="word">weight</span><span class="structure">}</span><span class="operator">,</span> <span class="symbol">$p</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="word">size</span><span class="structure">});</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$p</span> <span class="operator">=</span> <span class="symbol">$w</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">elsif</span> <span class="structure">(</span><span class="symbol">$p</span> <span class="operator">=</span> <span class="word">first</span> <span class="structure">{</span> <span class="magic">$_</span> <span class="structure">}</span> <span class="word">grep</span> <span class="match">m/\b $w \b/x</span> <span class="operator">=&gt;</span> <span class="symbol">@presents</span> <span class="operator">or</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$p</span> <span class="operator">=</span> <span class="word">first</span> <span class="structure">{</span>     <span class="symbol">$w</span> <span class="operator">=~</span> <span class="match">m/\b $_ \b/x</span> <span class="structure">}</span>  <span class="symbol">@presents</span><span class="structure">)</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="structure">)</span> <span class="operator">=</span> <span class="structure">(</span><span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$p</span><span class="structure">}{</span><span class="word">weight</span><span class="structure">}</span><span class="operator">,</span> <span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$p</span><span class="structure">}</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="word">size</span><span class="structure">});</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="structure">)</span> <span class="operator">=</span> <span class="structure">(</span><span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="structure">);</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">foreach</span> <span class="keyword">my</span> <span class="symbol">$postal</span> <span class="structure">(</span><span class="word">keys</span> <span class="cast">%</span><span class="structure">{</span><span class="symbol">$count</span><span class="structure">{</span><span class="symbol">$wish</span><span class="structure">}})</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$n</span> <span class="operator">=</span> <span class="symbol">$count</span><span class="structure">{</span><span class="symbol">$wish</span><span class="structure">}{</span><span class="symbol">$postal</span><span class="structure">};</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">presents</span><span class="structure">}{</span><span class="symbol">$wish</span><span class="structure">}</span> <span class="operator">=</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span> <span class="operator">=&gt;</span> <span class="symbol">$p</span> <span class="operator">//</span> <span class="double">&quot;unknown&quot;</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>  <span class="operator">=&gt;</span> <span class="symbol">$weight</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>    <span class="operator">=&gt;</span> <span class="symbol">$size</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>   <span class="operator">=&gt;</span> <span class="symbol">$n</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">};</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">count</span><span class="structure">}</span>  <span class="operator">+=</span> <span class="symbol">$n</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">size</span><span class="structure">}</span>   <span class="operator">+=</span> <span class="symbol">$n</span> <span class="operator">*</span> <span class="symbol">$size</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">weight</span><span class="structure">}</span> <span class="operator">+=</span> <span class="symbol">$n</span> <span class="operator">*</span> <span class="symbol">$weight</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br /><br /><span class="word">DDumper</span> <span class="cast">\</span><span class="symbol">%ship</span><span class="structure">;</span><br /><br />&nbsp;<span class="operator">=&gt;</span><br /><br /><span class="structure">{</span>   <span class="word">NE13</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Magic beaded handbag'</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'handbag'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'wand'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'0.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">3</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'1.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NE66</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'wand'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'0.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'0.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span></code><br />&nbsp;</td></table>
  <h4 id="Planning-production">Planning production</h4>
  <p>Using the same wish-list data, they can control the production department. They just need to know how many presents they should manufacture and with what specs. They are not interested at all in where the presents will be shipped or who will be the happy child to receive the present.</p>
  <p>To get the right data to production they still need the present properties in order to categorize the presents. This turned out to be very <a href="wish-uk-5.pl">easy</a>:</p>
  <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;<br />16:&nbsp;<br />17:&nbsp;<br />18:&nbsp;<br />19:&nbsp;<br />20:&nbsp;<br />21:&nbsp;<br />22:&nbsp;<br />23:&nbsp;<br />24:&nbsp;<br />25:&nbsp;<br />26:&nbsp;<br />27:&nbsp;<br />28:&nbsp;<br />29:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">my</span> <span class="symbol">$props</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;presents.csv&quot;</span><span class="operator">,</span> <span class="word">key</span> <span class="operator">=&gt;</span> <span class="double">&quot;present&quot;</span><span class="structure">);</span><br /><span class="keyword">my</span> <span class="symbol">@presents</span> <span class="operator">=</span> <span class="word">keys</span> <span class="cast">%</span><span class="symbol">$props</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">%count</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-uk.csv&quot;</span><span class="operator">,</span> <span class="word">headers</span> <span class="operator">=&gt;</span> <span class="double">&quot;auto&quot;</span><span class="operator">,</span> <span class="word">filter</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">1</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$w</span> <span class="operator">=</span> <span class="word">lc</span> <span class="magic">$_</span><span class="structure">{</span><span class="word">Wish</span><span class="structure">};</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$p</span> <span class="operator">=</span> <span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$w</span><span class="structure">}</span> <span class="operator">?</span> <span class="symbol">$w</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="operator">:</span> <span class="structure">(</span><span class="word">first</span> <span class="structure">{</span> <span class="magic">$_</span> <span class="structure">}</span> <span class="word">grep</span> <span class="match">m/\b $w \b/x</span> <span class="operator">=&gt;</span> <span class="symbol">@presents</span><span class="structure">)</span> <span class="operator">||</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="word">first</span> <span class="structure">{</span>     <span class="symbol">$w</span> <span class="operator">=~</span> <span class="match">m/\b $_ \b/x</span> <span class="structure">}</span>  <span class="symbol">@presents</span><span class="structure">)</span> <span class="operator">||</span> <span class="symbol">$w</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$count</span><span class="structure">{</span><span class="symbol">$p</span><span class="structure">}{</span><span class="symbol">$w</span><span class="structure">}{</span><span class="magic">$_</span><span class="structure">{</span><span class="word">Specs</span><span class="structure">}}</span><span class="operator">++</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">0</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">});</span><br /><br />&nbsp;<span class="operator">=&gt;</span><br /><br /><span class="structure">{</span>   <span class="word">handbag</span>          <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'magic beaded handbag'</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Unlimited space'</span> <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'10&frac34;&quot; Vine w/ dragon heartstring'</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Crooked oak w/ Muggle blood'</span> <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span></code><br />&nbsp;</td></table>
  <h3 id="More-of-Europe">More of Europe</h3>
  <p>So, with the UK covered, let&#39;s see what the Dutch and the Germans sent to Santa.</p>
  <p>The <a href="wish-nl.csv">Dutch sent Santa</a>:</p>
  <pre><code> naam;geboortedatum;postcode;adres;wens;specificaties
 Gordon;19680706;1000AZ;Blaricum;handbag;pink size 12
 Chantal Janzen;19790215;1071HW;Willemsparkweg;handbag;Dior, black</code></pre>
 <p>The <a href="wish-de.csv">Germans sent Santa</a>:</p>
 <pre><code> Name,Geburtstag,PostLeitzahl,Adresse,Wunsch,Spezifikationen
 Kurt Weller,20131211,80331,Uns&ouml;ldstra&szlig;e,Tattoo,the one with the hidden message</code></pre>
 <p>What they see here is that the Dutch use a semi-colon instead of a colon and both the German and the Dutch use localized headers, but thankfully still use the English spelling for the presents.</p>
 <p>As for the separator, Text::CSV_XS&#39; csv function has a ready to go no-brainer option available:</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-nl.csv&quot;</span><span class="operator">,</span> <span class="word">sep_set</span> <span class="operator">=&gt;</span> <span class="structure">[</span> <span class="double">&quot;,&quot;</span><span class="operator">,</span> <span class="double">&quot;;&quot;</span> <span class="structure">]);</span></code><br />&nbsp;</td></table>
 <p>problem solved :)</p>
 <p>When the elves were digging into the manual pages to find that option, they also discovered that they did not need to take any special action to deal with the different line-ending that the Dutch used (<code>\r\n</code> instead of <code>\n</code> as used in the UK version). It was already dealt with.</p>
 <p>When they parsed the German file, they were unable to find the <code>Name</code> column and they got an empty last row. Puzzled by that, they used several tools to view the actual content to find that the file contained a lot of <code>00</code> bytes and it started with two mystery bytes <code>FE</code> and <code>FF</code>.</p>
 <p>In despair they went to Santa, who explained them the meaning of the Byte Order Mark or short BOM. Again in awe of Santa&#39;s wisdom, they reread the manual pages and found that <code>csv ()</code> did support BOM.</p>
 <table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;wish-de.csv&quot;</span><span class="operator">,</span> <span class="word">bom</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="structure">);</span></code><br />&nbsp;</td></table>
 <p>So, the only issue they needed to fix was the header names in order to combine the wish-lists.</p>
 <p>Instead of trying to translate all headers to a uniform language (be that elvish or English), it is easier to just define the headers and skip the localized name scheme. If all countries keep sending their wish-lists with the same columns, as they do, it does not really matter what the header states, so we choose our own tags.</p>
 <p>The csv function supports setting the header and skipping the header in the filter is also possible, so that problem can be tackled relatively easy. They can read all wish-list files in a single loop and <a href="wish-xx.pl">collect all required data</a>:</p>
<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;<br />16:&nbsp;<br />17:&nbsp;<br />18:&nbsp;<br />19:&nbsp;<br />20:&nbsp;<br />21:&nbsp;<br />22:&nbsp;<br />23:&nbsp;<br />24:&nbsp;<br />25:&nbsp;<br />26:&nbsp;<br />27:&nbsp;<br />28:&nbsp;<br />29:&nbsp;<br />30:&nbsp;<br />31:&nbsp;<br />32:&nbsp;<br />33:&nbsp;<br />34:&nbsp;<br />35:&nbsp;<br />36:&nbsp;<br />37:&nbsp;<br />38:&nbsp;<br />39:&nbsp;<br />40:&nbsp;<br />41:&nbsp;<br />42:&nbsp;<br />43:&nbsp;<br />44:&nbsp;<br />45:&nbsp;<br />46:&nbsp;<br />47:&nbsp;<br />48:&nbsp;<br />49:&nbsp;<br />50:&nbsp;<br />51:&nbsp;<br />52:&nbsp;<br />53:&nbsp;<br />54:&nbsp;<br />55:&nbsp;<br />56:&nbsp;<br />57:&nbsp;<br />58:&nbsp;<br />59:&nbsp;<br />60:&nbsp;<br />61:&nbsp;<br />62:&nbsp;<br />63:&nbsp;<br />64:&nbsp;<br />65:&nbsp;<br />66:&nbsp;<br />67:&nbsp;<br />68:&nbsp;<br />69:&nbsp;<br />70:&nbsp;<br />71:&nbsp;<br />72:&nbsp;<br />73:&nbsp;<br />74:&nbsp;<br />75:&nbsp;<br />76:&nbsp;<br />77:&nbsp;<br />78:&nbsp;<br />79:&nbsp;<br />80:&nbsp;<br />81:&nbsp;<br />82:&nbsp;<br />83:&nbsp;<br />84:&nbsp;<br />85:&nbsp;<br />86:&nbsp;<br />87:&nbsp;<br />88:&nbsp;<br />89:&nbsp;<br />90:&nbsp;<br />91:&nbsp;<br />92:&nbsp;<br />93:&nbsp;<br />94:&nbsp;<br />95:&nbsp;<br />96:&nbsp;<br />97:&nbsp;<br />98:&nbsp;<br />99:&nbsp;<br />100:&nbsp;<br />101:&nbsp;<br />102:&nbsp;<br />103:&nbsp;<br />104:&nbsp;<br />105:&nbsp;<br />106:&nbsp;<br />107:&nbsp;<br />108:&nbsp;<br />109:&nbsp;<br />110:&nbsp;<br />111:&nbsp;<br />112:&nbsp;<br />113:&nbsp;<br />114:&nbsp;<br />115:&nbsp;<br />116:&nbsp;<br />117:&nbsp;<br />118:&nbsp;<br />119:&nbsp;<br />120:&nbsp;<br />121:&nbsp;<br />122:&nbsp;<br />123:&nbsp;<br />124:&nbsp;<br />125:&nbsp;<br />126:&nbsp;<br />127:&nbsp;<br />128:&nbsp;<br />129:&nbsp;<br />130:&nbsp;<br />131:&nbsp;<br />132:&nbsp;<br />133:&nbsp;<br />134:&nbsp;<br />135:&nbsp;<br />136:&nbsp;<br />137:&nbsp;<br />138:&nbsp;<br />139:&nbsp;<br />140:&nbsp;<br />141:&nbsp;<br />142:&nbsp;<br />143:&nbsp;<br />144:&nbsp;<br />145:&nbsp;<br />146:&nbsp;<br />147:&nbsp;<br />148:&nbsp;<br />149:&nbsp;<br />150:&nbsp;<br />151:&nbsp;<br />152:&nbsp;<br />153:&nbsp;<br />154:&nbsp;<br />155:&nbsp;<br />156:&nbsp;<br />157:&nbsp;<br />158:&nbsp;<br />159:&nbsp;<br />160:&nbsp;<br />161:&nbsp;<br />162:&nbsp;<br />163:&nbsp;<br />164:&nbsp;<br />165:&nbsp;<br />166:&nbsp;<br />167:&nbsp;<br />168:&nbsp;<br />169:&nbsp;<br />170:&nbsp;<br />171:&nbsp;<br />172:&nbsp;<br />173:&nbsp;<br />174:&nbsp;<br />175:&nbsp;<br />176:&nbsp;<br />177:&nbsp;<br />178:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Data::Peek</span><span class="structure">;</span><br /><span class="word">binmode</span> <span class="word">STDERR</span><span class="operator">,</span> <span class="double">&quot;:encoding(utf-8)&quot;</span><span class="structure">;</span><br /><br /><span class="keyword">use</span> <span class="word">List::Util</span>   <span class="words">qw( sum first )</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">Text::CSV_XS</span> <span class="words">qw( csv )</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">$props</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><span class="word">in</span> <span class="operator">=&gt;</span> <span class="double">&quot;presents.csv&quot;</span><span class="operator">,</span> <span class="word">key</span> <span class="operator">=&gt;</span> <span class="double">&quot;present&quot;</span><span class="structure">);</span><br /><span class="keyword">my</span> <span class="symbol">@presents</span> <span class="operator">=</span> <span class="word">keys</span> <span class="cast">%</span><span class="symbol">$props</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">%ship</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">@wlh</span> <span class="operator">=</span> <span class="words">qw( name birth pc address wish spec )</span><span class="structure">;</span><br /><br /><span class="keyword">my</span> <span class="symbol">%count</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">%prod</span><span class="structure">;</span><br /><span class="keyword">foreach</span> <span class="keyword">my</span> <span class="symbol">$wlfn</span> <span class="structure">(</span><span class="word">glob</span> <span class="double">&quot;wish-??.csv&quot;</span><span class="structure">)</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="structure">(</span><span class="symbol">$cc</span><span class="structure">)</span> <span class="operator">=</span> <span class="word">uc</span> <span class="structure">(</span><span class="symbol">$wlfn</span><span class="structure">)</span> <span class="operator">=~</span> <span class="match">m/-(\w+)/</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$aoa</span> <span class="operator">=</span> <span class="word">csv</span> <span class="structure">(</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">in</span>      <span class="operator">=&gt;</span> <span class="symbol">$wlfn</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">bom</span>     <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">headers</span> <span class="operator">=&gt;</span> <span class="cast">\</span><span class="symbol">@wlh</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">filter</span>  <span class="operator">=&gt;</span> <span class="structure">{</span> <span class="number">1</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span> <span class="structure">{</span><br /><span class="comment">            # Skip lacalized header<br /></span>            <span class="magic">$_</span><span class="structure">[</span><span class="number">0</span><span class="structure">]</span><span class="operator">-&gt;</span><span class="word">record_number</span> <span class="operator">==</span> <span class="number">1</span> <span class="operator">and</span> <span class="keyword">return</span> <span class="number">0</span><span class="structure">;</span><br /><br /><span class="comment">            # For shipping/logistics<br /></span>            <span class="symbol">$count</span><span class="structure">{</span><span class="magic">$_</span><span class="structure">{</span><span class="word">wish</span><span class="structure">}}{</span><span class="symbol">$cc</span><span class="structure">}{</span><span class="magic">$_</span><span class="structure">{</span><span class="word">pc</span><span class="structure">}</span> <span class="operator">=~</span> <span class="substitute">s/\s.*//r</span><span class="structure">}</span><span class="operator">++</span><span class="structure">;</span><br /><br /><span class="comment">            # For production<br /></span>            <span class="keyword">my</span> <span class="symbol">$w</span> <span class="operator">=</span> <span class="word">lc</span> <span class="magic">$_</span><span class="structure">{</span><span class="word">wish</span><span class="structure">};</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$p</span> <span class="operator">=</span> <span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$w</span><span class="structure">}</span> <span class="operator">?</span> <span class="symbol">$w</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="operator">:</span> <span class="structure">(</span><span class="word">first</span> <span class="structure">{</span> <span class="magic">$_</span> <span class="structure">}</span> <span class="word">grep</span> <span class="match">m/\b $w \b/x</span> <span class="operator">=&gt;</span> <span class="symbol">@presents</span><span class="structure">)</span> <span class="operator">||</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="word">first</span> <span class="structure">{</span>     <span class="symbol">$w</span> <span class="operator">=~</span> <span class="match">m/\b $_ \b/x</span> <span class="structure">}</span>  <span class="symbol">@presents</span><span class="structure">)</span> <span class="operator">||</span> <span class="symbol">$w</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$prod</span><span class="structure">{</span><span class="symbol">$p</span><span class="structure">}{</span><span class="symbol">$w</span><span class="structure">}{</span><span class="magic">$_</span><span class="structure">{</span><span class="word">spec</span><span class="structure">}}</span><span class="operator">++</span><span class="structure">;</span><br /><br /><span class="comment">            # Don't store<br /></span>            <span class="number">0</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">});</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br /><br /><span class="keyword">foreach</span> <span class="keyword">my</span> <span class="symbol">$wish</span> <span class="structure">(</span><span class="word">keys</span> <span class="symbol">%count</span><span class="structure">)</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$w</span> <span class="operator">=</span> <span class="word">lc</span> <span class="symbol">$wish</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="operator">,</span> <span class="symbol">$p</span><span class="structure">);</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> <span class="structure">(</span><span class="symbol">$p</span> <span class="operator">=</span> <span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$w</span><span class="structure">})</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="structure">)</span> <span class="operator">=</span> <span class="structure">(</span><span class="symbol">$p</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="word">weight</span><span class="structure">}</span><span class="operator">,</span> <span class="symbol">$p</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="word">size</span><span class="structure">});</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$p</span> <span class="operator">=</span> <span class="symbol">$w</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">elsif</span> <span class="structure">(</span><span class="symbol">$p</span> <span class="operator">=</span> <span class="word">first</span> <span class="structure">{</span> <span class="magic">$_</span> <span class="structure">}</span> <span class="word">grep</span> <span class="match">m/\b $w \b/x</span> <span class="operator">=&gt;</span> <span class="symbol">@presents</span> <span class="operator">or</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$p</span> <span class="operator">=</span> <span class="word">first</span> <span class="structure">{</span>     <span class="symbol">$w</span> <span class="operator">=~</span> <span class="match">m/\b $_ \b/x</span> <span class="structure">}</span>  <span class="symbol">@presents</span><span class="structure">)</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="structure">)</span> <span class="operator">=</span> <span class="structure">(</span><span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$p</span><span class="structure">}{</span><span class="word">weight</span><span class="structure">}</span><span class="operator">,</span> <span class="symbol">$props</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="symbol">$p</span><span class="structure">}</span><span class="operator">-&gt;</span><span class="structure">{</span><span class="word">size</span><span class="structure">});</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">(</span><span class="symbol">$weight</span><span class="operator">,</span> <span class="symbol">$size</span><span class="structure">)</span> <span class="operator">=</span> <span class="structure">(</span><span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="structure">);</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">foreach</span> <span class="keyword">my</span> <span class="symbol">$cc</span> <span class="structure">(</span><span class="word">keys</span> <span class="cast">%</span><span class="structure">{</span><span class="symbol">$count</span><span class="structure">{</span><span class="symbol">$wish</span><span class="structure">}})</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">foreach</span> <span class="keyword">my</span> <span class="symbol">$postal</span> <span class="structure">(</span><span class="word">keys</span> <span class="cast">%</span><span class="structure">{</span><span class="symbol">$count</span><span class="structure">{</span><span class="symbol">$wish</span><span class="structure">}{</span><span class="symbol">$cc</span><span class="structure">}})</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">my</span> <span class="symbol">$n</span> <span class="operator">=</span> <span class="symbol">$count</span><span class="structure">{</span><span class="symbol">$wish</span><span class="structure">}{</span><span class="symbol">$cc</span><span class="structure">}{</span><span class="symbol">$postal</span><span class="structure">};</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$cc</span><span class="structure">}{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">presents</span><span class="structure">}{</span><span class="symbol">$wish</span><span class="structure">}</span> <span class="operator">=</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span> <span class="operator">=&gt;</span> <span class="symbol">$p</span> <span class="operator">//</span> <span class="double">&quot;unknown&quot;</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>  <span class="operator">=&gt;</span> <span class="symbol">$weight</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>    <span class="operator">=&gt;</span> <span class="symbol">$size</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>   <span class="operator">=&gt;</span> <span class="symbol">$n</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">};</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$cc</span><span class="structure">}{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">count</span><span class="structure">}</span>  <span class="operator">+=</span> <span class="symbol">$n</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$cc</span><span class="structure">}{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">size</span><span class="structure">}</span>   <span class="operator">+=</span> <span class="symbol">$n</span> <span class="operator">*</span> <span class="symbol">$size</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="symbol">$ship</span><span class="structure">{</span><span class="symbol">$cc</span><span class="structure">}{</span><span class="symbol">$postal</span><span class="structure">}{</span><span class="word">weight</span><span class="structure">}</span> <span class="operator">+=</span> <span class="symbol">$n</span> <span class="operator">*</span> <span class="symbol">$weight</span><span class="structure">;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br /><br /><span class="word">DDumper</span> <span class="structure">{</span> <span class="word">ship</span> <span class="operator">=&gt;</span> <span class="cast">\</span><span class="symbol">%ship</span><span class="operator">,</span> <span class="word">prod</span> <span class="operator">=&gt;</span> <span class="cast">\</span><span class="symbol">%prod</span> <span class="structure">};</span><br /><br />&nbsp;<span class="operator">=&gt;</span><br /><br /><span class="structure">{</span>   <span class="word">prod</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">handbag</span>          <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">handbag</span>          <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Dior, black'</span>    <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'pink size 12'</span>   <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'magic beaded handbag'</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Unlimited space'</span> <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">tattoo</span>           <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">tattoo</span>           <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'the one with the hidden message'</span> <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'10&frac34;&quot; Vine w/ dragon heartstring'</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Crooked oak w/ Muggle blood'</span> <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">ship</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">DE</span>               <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="number">80331</span>            <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Tattoo</span>           <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'unknown'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NL</span>               <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'1000AZ'</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">handbag</span>          <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'handbag'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'1071HW'</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">handbag</span>          <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'handbag'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">UK</span>               <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NE13</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="single">'Magic beaded handbag'</span> <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'handbag'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">2</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="number">1</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'wand'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'0.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">3</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'1.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">NE66</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">presents</span>         <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">Wand</span>             <span class="operator">=&gt;</span> <span class="structure">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">count</span>            <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">present</span>          <span class="operator">=&gt;</span> <span class="single">'wand'</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'0.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">size</span>             <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="word">weight</span>           <span class="operator">=&gt;</span> <span class="single">'0.2'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="structure">}</span></code><br />&nbsp;</td></table>

