<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Pod::Advent 0.20 (Pod::Simple 3.07, Perl::Tidy 20090616) on 2010-12-06 00:16:46 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>2010 Perl Advent Calendar: Merry Christmap</title>
<link rel="stylesheet" href="../style.css" type="text/css" />
<link rel="alternate" type="text/plain" href="mod5.pod" />
</head>
<body>
<h1><a href="../">Perl Advent Calendar 2010-12</a>-05</h1>
<h2 align="center">Merry Christmap</h2>
<h3 align="center">by Jerrad Pierce</h3>
<p>The jolly old elf's a big fan of open source and open data, but traditionally mapping gadgets have all been proprietary. Therefore his IT elves have been keeping an eye on projects like OpenStreetMap. They were recently pleased to discover <tt><a href="http://search.cpan.org/perldoc?Champlain">Champlain</a></tt>, <a href="http://projects.gnome.org/libchamplain/reference.html">thin Perl bindings to libchamplain</a>. libchamplain is a library for accessing Free data from OSM and other projects.</p>
<p>Installing the module was a little hairy though, since dependencies on <tt>Clutter</tt>, <tt>ExtUtils::Depends</tt>, and <tt>ExtUtils::PkgConfig</tt> are not declared, and the version of libchamplain shipping with Xm/OS is too old for the module, even though it uses an oudated verson itself. As noted in the POD, the A[BP]I of the library is not yet set, so the specific version used by the developer&mdash;0.5&mdash;is required. Once the dependencies were installed though, the module built successfully and the elves were quickly able to display a map, putting them on their way to creating a new GPS platform for the boss.</p>
<p><img src="screenshot.jpg" height="625" width="808" alt="Boston, MA" /></p>
<a name="mod5.pl" id="mod5.pl"></a><h2><a href="mod5.pl">mod5.pl</a></h2><pre>
   1 <span class="k">use</span> <span class="w">Clutter</span> <span class="q">&#39;-init&#39;</span><span class="sc">;</span>
   2 <span class="k">use</span> <span class="w">Champlain</span><span class="sc">;</span>
   3 
   4 <span class="c"># Create the canvas</span>
   5 <span class="k">my</span> <span class="i">$stage</span> = <span class="w">Clutter::Stage</span><span class="w">-&gt;get_default</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
   6 <span class="i">$stage</span><span class="i">-&gt;add</span><span class="s">(</span><span class="k">my</span> <span class="i">$map</span> = <span class="w">Champlain::View</span><span class="w">-&gt;new</span><span class="s">)</span><span class="sc">;</span>
   7 <span class="i">$_</span><span class="i">-&gt;set_size</span><span class="s">(</span><span class="n">800</span><span class="cm">,</span> <span class="n">600</span><span class="s">)</span> <span class="k">foreach</span> <span class="i">$map</span><span class="cm">,</span> <span class="i">$stage</span><span class="sc">;</span>
   8 <span class="i">$map</span><span class="i">-&gt;set_scroll_mode</span><span class="s">(</span><span class="w">CHAMPLAIN_SCROLL_MODE_KINETIC</span><span class="s">)</span><span class="sc">;</span> <span class="c">#w/ inertia</span>
   9 <span class="i">$map</span><span class="i">-&gt;set_show_scale</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>
  10 
  11 <span class="c"># Pin the tail on the donkey</span>
  12 <span class="i">$map</span><span class="i">-&gt;set_zoom_level</span><span class="s">(</span><span class="n">11</span><span class="s">)</span><span class="sc">;</span>
  13 <span class="i">$map</span><span class="i">-&gt;center_on</span><span class="s">(</span><span class="n">42.33</span><span class="cm">,</span> <span class="n">-71</span><span class="s">)</span><span class="sc">;</span>
  14 
  15 <span class="c"># Reveal the results</span>
  16 <span class="i">$stage</span><span class="i">-&gt;show_all</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  17 <span class="w">Clutter</span><span class="w">-&gt;main</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
</pre>
<div style="float: right; font-size: 10pt"><a href="mod5.pod">View Source (POD)</a></div><br />
</body>
</html>
