<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="WWW::AdventCalendar v1.112" />
    <link rel="alternate" title="Perl Advent Calendar 2018 XML feed" href="atom.xml" type="application/atom+xml" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="stylesheet" href="2018.css" type="text/css" />
    <title>
Perl Advent Calendar 2018 - 
Christmas Quoting

</title>
</head>
<body>
    <div id="contentwrapper">
        <div id="header">
            <h1><a href="index.html">Perl Advent Calendar 2018</a></h1>
        </div>

        <p id="tagline">2018 twenty four merry days of Perl
         <a class='feed' href="atom.xml">Feed</a>
        </p>

        <div id="content">
          

<h1 class='title'>Christmas Quoting</h1>
<div class='subtitle'>B::perlstring - 2018-12-04</div>

<div class='pod'><p>&quot;Today,&quot; Buddy Snowbeard explained to his Elf class, &quot;I&#39;m going to <i>change your world</i>.&quot;</p>

<p>&quot;Not by teaching you anything earth shattering. Oh no, because becoming an effective programmer isn&#39;t about making giant leaps, from awesome framework to awesome framework. It&#39;s about learning the little things each day, that make your life easier.&quot;</p>

<p>&quot;Today&quot;, Buddy intoned with undue seriousness, &quot;I&#39;m going to teach you how to print out a variable!&quot;</p>

<p>The groans from the class were audible. The class knew this. It&#39;d been covered in Perl Programming 101 back in Elf kindergarten. They were sixth graders for Santa&#39;s sake, and this was like teaching granny elf to suck candy.</p>

<p>&quot;Now I know what you&#39;re all thinking&quot;, Buddy continued, &quot;but listen to me for a second.&quot;</p>

<p>He tapped the board: &quot;I see a lot of elves out there printing variables out like this:&quot;</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">say</span> <span class="word">STDERR</span> <span class="single">'DEBUG: The next $childname is '</span><span class="operator">.</span><span class="symbol">$childname</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>&quot;And you&#39;re saying to yourselves what&#39;s wrong with that? Plenty! Plenty is wrong with that.&quot;</p>

<p>&quot;You in the front, Noelle Toffeecane, what is the problem here?&quot;</p>

<p>&quot;Er,&quot; Noelle stammered, &quot;you can&#39;t tell where the thing you&#39;re printing out starts and ends?&quot;</p>

<p>&quot;Very good Miss Toffeecane. I guess we could change it to something like this:&quot;</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">say</span> <span class="word">STDERR</span> <span class="single">'DEBUG: The next $childname is &quot;'</span><span class="operator">.</span><span class="symbol">$childname</span><span class="operator">.</span><span class="single">'&quot;'</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>&quot;Of course this still has problems. What might they be, Cookie Flippyfeast?&quot;</p>

<p>&quot;The childname could have like a double quote in it? You know, it could, like, um mess it up like? So you&#39;ll be like, I have no idea where this even starts and ends like?&quot;</p>

<p>&quot;Eloquently put Mr Flippyfeast. And why might <code>$childname</code> have a double quote in it? Because it could <i>like</i> have anything in it <i>like</i>. After all that&#39;s why you&#39;re printing it out. To debug it. Skittle Dreamwish, what else could be in the string that&#39;d mess up our output?&quot;</p>

<p>&quot;A newline?&quot;</p>

<p>&quot;Good. Another Fruity Flippywarmth?&quot;</p>

<p>&quot;A unicode character&quot;</p>

<p>&quot;Yes! And you&#39;d be trusting your terminal to render the sequence out - you&#39;d have no way of telling exactly what character sequence was actually in the string. What other character might our terminal get confused with, Tiny Plumhat?&quot;</p>

<p>&quot;A control character, sir. You could end up turning the whole terminal red on green. Though that would look festive, sir.&quot;</p>

<p>&quot;Indeed, but it wouldn&#39;t help with your debugging. In fact, let&#39;s create a truly naughty string to print out.&quot;</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Term::ANSIColor</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">$childname</span> <span class="operator">=</span> <span class="word">color</span><span class="structure">(</span><span class="single">'red on_green'</span><span class="structure">);</span><br /><span class="symbol">$childname</span> <span class="operator">.=</span> <span class="double">&quot;Larry the \N{SNOWMAN}&quot;</span><span class="structure">;</span><br /><span class="symbol">$childname</span> <span class="operator">.=</span> <span class="single">'\n&quot;'</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>&quot;What do we need to do before we print it out - you in the back - Stripes Dreamfeast isn&#39;t it?&quot;</p>

<p>&quot;You need to escape it, sir. I&#39;d use Data::Dumper&quot;</p>

<p>&quot;And how would that look, Mr Dreamfest? Let&#39;s write it up on the board.&quot;</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Data::Dumper</span><span class="structure">;</span><br /><span class="word">say</span> <span class="word">STDERR</span> <span class="single">'DEBUG: The next $childname is '</span><span class="operator">.</span> <span class="word">Dumper</span><span class="structure">(</span><span class="symbol">$childname</span><span class="structure">)</span></code><br />&nbsp;</td></table>

<p>&quot;But even with a nice string that&#39;ll print out something like this&quot;</p>

<pre><code>    DEBUG: The next $childname is $VAR1 = &#39;Larry Wall&#39;;</code></pre>

<p>&quot;Not exactly what we want. We can do better? Any ideas, Dash Sleepyhat?&quot;</p>

<p>&quot;There are options for Data::Dumper, sir. We can pretty much make it do whatever we want&quot;</p>

<p>&quot;Yes you can. But can <i>you</i> remember them off of the top of your head? I certainly can&#39;t. And I don&#39;t want to write three lines of options in front of every debug statement I use. What&#39;s another module we could use? Anyone?&quot;</p>

<p>The class was silent. Eventually a small elf called Mistle Ivybell raised his hand at the back. &quot;Data::Printer, sir?&quot;</p>

<p>&quot;Data::Printer is a good choice Mr Ivybell, but it wasn&#39;t exactly what I was looking for. I&#39;m thinking of something instead that&#39;s always installed and ships with perl? Anyone?&quot;</p>

<p>No hands went up.</p>

<p>&quot;Oh surely some of you must have heard of the B module? It allows you to do internal like things with Perl. And one of the things it can do is get a Perl string representation of any string. Let&#39;s see how this works:&quot;</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">B</span> <span class="words">qw(perlstring)</span><span class="structure">;</span><br /><span class="word">say</span> <span class="word">STDERR</span> <span class="single">'DEBUG: The next $childname is '</span><span class="operator">.</span> <span class="word">perlstring</span><span class="structure">(</span><span class="symbol">$childname</span><span class="structure">)</span></code><br />&nbsp;</td></table>

<p>&quot;And that prints out something - if not nice, since we didn&#39;t gave it such a naughty string to start with - at least unambiguously understandable&quot;</p>

<pre><code>    DEBUG: The next $childname is &quot;\x{1b}[31;42mLarry the \x{2603}\&quot;&quot;</code></pre>

<p>Just then the bell rang.</p>

<p>&quot;That&#39;s all for today class! Don&#39;t forget your test scripts are due by the end of the week!&quot;</p>

</div>

<div id='author'>
<img alt='Gravatar Image' style='vertical-align:middle' src=http://www.gravatar.com/avatar/5d71b5f0c61e97cd452d625cc24a4c82?r=g&s=80&d=retro />
This article contributed by: Mark Fowler &lt;mark@twoshortplanks.com&gt;
</div>


<ul id="pager">
    <li class="previous"><a title="REST API and the Baby" href="2018-12-03.html">Previous</a></li>

    <li class="next"><a title="Data::Rmap - Santa&#39;s deepdive in an ocean of stockings." href="2018-12-05.html">Next</a></li>
</ul>
<div style="clear: both"></div>

        </div>

    </div>



</body>
</html>





